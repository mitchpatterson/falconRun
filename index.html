<!doctype html>
<html>
<head>
<meta charset="utf-8" />
<title>Falcon Run</title>

<script>var zon = true; // true for comments from zim code</script>
<script src="http://d309knd7es5f10.cloudfront.net/zim_1.4.4_min.js"></script>
<script src="http://code.createjs.com/createjs-2015.05.21.min.js"></script> 
<!-- should use CDN links available from CreateJS and ZIM sites -->
<script src="js/asteroid1.js"></script>
<script src="js/asteroid2.js"></script>
<script src="js/asteroid3.js"></script>
<script src="js/asteroid4.js"></script>
<script src="js/asteroid5-light.js"></script>
<script src="js/asteroid1med.js"></script>
<script src="js/asteroid2med.js"></script>
<script src="js/asteroid3med.js"></script>
<script src="js/asteroid4med.js"></script>
<script src="js/asteroid5med.js"></script>
<script src="js/asteroid1dark.js"></script>
<script src="js/asteroid2dark.js"></script>
<script src="js/asteroid3dark.js"></script>
<script src="js/asteroid4dark.js"></script>
<script src="js/asteroid5dark.js"></script>
<script src="js/falcon.js"></script>

<style>
	body {margin:0px; padding:0px; background-color:#000;}
	#myCanvas {position:absolute; background-color:#000;/* cursor: none;*/}
</style>

<script>

var scaling = "fit"; // fit scales to fit the browser window while keeping the aspect ratio
var width = 960;
var height = 640;
var frame = new zim.Frame(scaling, width, height); 

frame.on("ready", function() {  
    console.log("ready from ZIM Frame");
    
    var stage = frame.stage;
    var stageW = frame.width;
    var stageH = frame.height;

    
    // used for tiles if there are tiles
    var squareW = 120;
    var squareH = 90;
    var squareS = 20;
    
    var imagePath = "img/";
    var manifest = [{id:"scrollerBack", src:"scrollerBack.png"},
                    {id:"scrollerMid", src:"scrollerMid.png"},
                    {id:"scrollerFront", src:"scrollerFront.png"},
                    {id:"falcon", src:"falcon.png"},
                    {id:"warningAsteroid", src:"warningAsteroid.png"}];

    var preload = new createjs.LoadQueue(false, imagePath);
    preload.loadManifest(manifest);
    preload.on("complete", game);
    
    
    function game() {
        console.log("____Star Wars Falcon Run____"); 

        var warningAsteroid = new createjs.Bitmap (preload.getResult("warningAsteroid"));

//  scroller Back

        var scrollerBack = new createjs.Bitmap (preload.getResult("scrollerBack"));
        stage.addChild(scrollerBack);

        var scrollerBack2 = new createjs.Bitmap (preload.getResult("scrollerBack"));
        stage.addChild(scrollerBack2);

        var scrollerSpeed = 3;
        var scroller1 = new zim.Scroller(scrollerBack, scrollerBack2, scrollerSpeed, -.05, false, 5);


// scroller Mid

        var scrollerMid = new createjs.Bitmap (preload.getResult("scrollerMid"));
        stage.addChild(scrollerMid);

        var scrollerMid2 = new createjs.Bitmap (preload.getResult("scrollerMid"));
        stage.addChild(scrollerMid2);

        var scroller2 = new zim.Scroller(scrollerMid, scrollerMid2, scrollerSpeed, -.08, false, 5);

// scroller Front

        var scrollerFront = new createjs.Bitmap (preload.getResult("scrollerFront"));
        stage.addChild(scrollerFront);

        var scrollerFront2 = new createjs.Bitmap (preload.getResult("scrollerFront"));
        stage.addChild(scrollerFront2);

        var scroller3 = new zim.Scroller(scrollerFront, scrollerFront2, scrollerSpeed, -.2, false, 5);

// adding asteroids
        var asteroids = new createjs.Container;
        stage.addChild(asteroids);

        var asteroid1 = new lib.asteroid1();
        // asteroids.addChild(asteroid1);
        zim.scale(asteroid1, .7);
        asteroid1.x = 400;

        var asteroid2 = new lib.asteroid2();
        // asteroids.addChild(asteroid2);
        zim.scale(asteroid2, .7);
        asteroid2.x = 200;

        var asteroid3 = new lib.asteroid3();
        // asteroids.addChild(asteroid3);
        zim.scale(asteroid3, .7);
        stage.update();

        var asteroid4 = new lib.asteroid4();
        // asteroids.addChild(asteroid4);
        // zim.scale(asteroid4, 1);
        asteroid4.x = 200;
        asteroid4.y = 200;

        var asteroid5light = new lib.asteroid5light();
        // asteroids.addChild(asteroid5light);
        // zim.scale(asteroid4, 1);
        asteroid5light.x = 200;
        asteroid5light.y = 200;

        var asteroid1med = new lib.asteroid1med();
        // asteroids.addChild(asteroid1med);
        // zim.scale(asteroid4, 1);
        asteroid1med.x = 200;
        asteroid1med.y = 200;

        var asteroid2med = new lib.asteroid2med();
        // asteroids.addChild(asteroid2med);
        // zim.scale(asteroid2, 1);
        asteroid2med.x = 200;
        asteroid2med.y = 200;

        var asteroid3med = new lib.asteroid3med();
        // asteroids.addChild(asteroid3med);
        // zim.scale(asteroid3, 1);
        asteroid3med.x = 200;
        asteroid3med.y = 200;

        var asteroid4med = new lib.asteroid4med();
        // asteroids.addChild(asteroid4med);
        // zim.scale(asteroid4, 1);
        asteroid4med.x = 200;
        asteroid4med.y = 200;

        var asteroid5med = new lib.asteroid5med();
        // asteroids.addChild(asteroid5med);
        // zim.scale(asteroid5, 1);
        asteroid5med.x = 200;
        asteroid5med.y = 200;

        var asteroid1dark = new lib.asteroid1dark();
        // asteroids.addChild(asteroid1dark);
        // zim.scale(asteroid1dark);
        asteroid1dark.x = 200;
        asteroid1dark.y = 200;

        var asteroid2dark = new lib.asteroid2dark();
        // asteroids.addChild(asteroid2dark);
        // zim.scale(asteroid2dark);
        asteroid2dark.x = 200;
        asteroid2dark.y = 200;

        var asteroid3dark = new lib.asteroid3dark();
        // asteroids.addChild(asteroid3dark);
        // zim.scale(asteroid3dark);
        asteroid3dark.x = 200;
        asteroid3dark.y = 200;

        var asteroid4dark = new lib.asteroid4dark();
        // asteroids.addChild(asteroid4dark);
        // zim.scale(asteroid4dark);
        asteroid4dark.x = 200;
        asteroid4dark.y = 200;

        var asteroid5dark = new lib.asteroid5dark();
        // asteroids.addChild(asteroid5dark);
        // zim.scale(asteroid5dark);
        asteroid5dark.x = 200;
        asteroid5dark.y = 200;

//  adding the falcon

        var falcon = new lib.falcon();
        stage.addChild(falcon);
        falcon.x = stageW/2;
        falcon.y = stageH/5*4;
        zim.scale(falcon, .2);
        // falcon.regX = falcon.getBounds().width/2;
        // falcon.regY = falcon.getBounds().height/2;
       
// damping function

        var damp = new zim.Damp(null, .04);
        var damp2 = new zim.Damp(null, .04);


        createjs.Ticker.framerate = 60;
        createjs.Ticker.on("tick", function(){
            falcon.x = damp.convert(stage.mouseX);
            console.log(scrollerMid.y);


// asteroid Field warning
            if((scrollerMid.y > 50 && scrollerMid.y < 57) || (scrollerMid.y > 64 && scrollerMid.y < 71) || (scrollerMid.y > 78 && scrollerMid.y < 85)|| (scrollerMid.y > 92 && scrollerMid.y < 99)|| (scrollerMid.y > 106 && scrollerMid.y < 113)){
                warningAsteroid.regX = warningAsteroid.getBounds().width/2;
                warningAsteroid.regY = warningAsteroid.getBounds().height/2;
                warningAsteroid.x = stageW/2; 
                warningAsteroid.y = stageH/2; 
                zim.scale(warningAsteroid, .7);

                   stage.addChild(warningAsteroid);
                   stage.update();

        

            } else {
                stage.removeChild(warningAsteroid);
            }
            stage.update();
        });



        stage.update(); 
    } 

});



</script>


</head>

<body>
</body>
</html>